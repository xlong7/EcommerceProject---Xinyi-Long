<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        body {
          margin: 0;
          font-family: Arial, Helvetica, sans-serif;
        }
        
        .topnav {
          overflow: hidden;
          background-color: rgb(70, 82, 82);
        }
        
        .topnav a {
          float: left;
          color: #f2f2f2;
          text-align: center;
          padding: 14px 16px;
          text-decoration: none;
          font-size: 17px;
        }
        .topnav a:hover {
          background-color: #ddd;
          color: black;
        }
        .topnav a.active {
          background-color: #030605;
          color: white;
        }
        .brand1{
          display:none
        }
        .brand2{
          display:none
        }
        form{
            margin-top:20px;
            padding-left:16px
        }
      </style>
  </head>
  <body>
        
    <div class="topnav">
        <a id="homepage" href="/homepage">Home</a>
        <a id="cart" href="/cartpage">Cart</a>
        <a id="orders" href="/myorder">My Orders</a>
        <div>
        {{!-- {{#if loggedIn}} --}}
          <a id="logout" href="" onclick=clearCookies()>Logout</a>
        {{!-- {{else}}
          <a id="register" href="/register">Sign up</a>
          <a id="login" href="/login">Login</a>
        {{/if}} --}}
    </div>
    </div>
    <div style="padding-left:16px">
    </div>
    <div>
        <form>
        <label>Name</label>
        <input type="text" id="name" />
        <br /><br />

        <label>Email</label>
        <input type="text" id="email" />
        <br /><br />

        <label>Billing Address</label>
        <input type="text" id="billing" />
        <br /><br />

        <label>Shipping Address</label>
        <input type="text" id="shipping" />
        <br /><br />
        <label>Please Select Your Payment Type</label>
            <select name="payment" id="payment">
                <option value="credit">Credit Card</option>
                <option value="debit">Debit Card</option>
                <option value="check">Check</option>
            </select>
        <input type="Button" id="submit" value="Submit" />
        </form>
    </div>
 <script>
      const host = "http://localhost:3000";
      $('#submit').on('click', function () {
      $.ajax({
        url: `${host}/checkout`,
        type: "POST",
        data: JSON.stringify({
          name:$('#name').val(),
          email: $('#email').val(),
          billing: $('#billing').val(),
          shipping:$('#shipping').val(),
          payment:$('#payment').val()
        }),
        contentType: "application/json; charset=utf-8",
        success: function (res) {
          alert("Checkout successfully! ");
          window.location = 'myorder'
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus + ': ' + errorThrown);
                {{!-- window.location.reload(); --}}
            }
      });
    });
    </script>
    {{!-- logout function --}}
    <script>
      function clearCookies(){
        document.cookie.split(";").forEach(function(c) { document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); });
      }
    </script>
</body>
</html>